{% extends "layout.html" %}
{% import "bootstrap/wtf.html" as wtf %}



{% block title %}Centros{% endblock %}

{% block content %}

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
  crossorigin=""/>

<div class="container col-md-8 col-sm-12 " style="max-width: 40rem;">
  <div class="card">

  <form action="{{ url_for('centro_create') }}" method="POST" enctype="multipart/form-data">
    <div class="card-header bg-primary text-white" >
      <h5>Crear centro:</h5>
    </div>
    <div class="card-body">
    <div class="form-group">
    {{ form.csrf_token }}
    {% if form.csrf_token.errors %}
      <div class="warning">You have submitted an invalid CSRF token</div>
    {% endif %}

    {{wtf.form_field(form.nombre)}}
    {{wtf.form_field(form.direccion)}}
    {{wtf.form_field(form.telefono)}}
    {{wtf.form_field(form.hora_inicio,type="Time")}}
    {{wtf.form_field(form.hora_fin,type="Time")}}
    {{wtf.form_field(form.municipio_id)}}
    {{wtf.form_field(form.web)}}
    {{wtf.form_field(form.email)}}
    {{form.protocolo.label(class="form-control-label")}}
    {{form.protocolo(accept=".pdf")}}
    {{wtf.form_field(form.tipo_centro)}}
    {{wtf.form_field(form.estado_id)}}
    {{wtf.form_field(form.longitud)}}
    {{wtf.form_field(form.latitud)}}




    </div>

    <div class="form-inline">
          <a href="{{ url_for('centro_index') }}" class="btn btn-primary my-1" >Volver</a>
          <div class="card-body d-flex justify-content-between align-items-center"></div>
          <div  class="col-auto my-1">
            {{form.submit(class="btn btn-lg btn-success")}}
          </div>
          <div>
            <button type="reset" class="btn btn-danger">Limpiar</button>
          </div>
     </div>
  </div>
  </form>

  <div id="mapid" style="height: 300px;">
  </div>

  <script type="text/javascript">
    var mymap = L.map('mapid').locate({setView: true, maxZoom: 16});
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
        id: 'mapbox.streets',
        accessToken: 'your.mapbox.access.token'}).addTo(mymap);
  </script>
</div>
<div id="mapid" height: 600px;></div>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>

  <script src="map.js" ></script>

</div>
{% endblock %}
